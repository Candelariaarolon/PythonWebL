{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Responsive Bootstrap4 Shop Template, Created by Imran Hossain from https://imransdesign.com/">

	<!-- title -->
	<title>Cart</title>

	<!-- favicon -->
	<link rel="shortcut icon" type="image/png" href="assets/img/favicon.png">
	<!-- google font -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
	<!-- fontawesome -->
    <link rel="stylesheet" href="{% static 'css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}">
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">
    <link rel="stylesheet" href="{% static 'css/meanmenu.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/individual.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/carrito.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">

</head>
<body>
	
	<!-- header -->
	<div class="top-header-area" id="sticker">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-sm-12 text-center">
					<div class="main-menu-wrap">
						<!-- logo -->
                        {% include "navbar.html" %}
						<div class="site-logo">
							<a href="index.html">
								<img src="assets/img/logo.png" alt="">
							</a>
							
						</div>
						<!-- logo -->
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end header -->


	<!-- breadcrumb-section -->
	<div class="breadcrumb-section breadcrumb-bg">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 offset-lg-2 text-center">
					<div class="breadcrumb-text">
						
						<h1>Tu Carrito</h1>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end breadcrumb section -->

	<!-- cart -->
	<div class="cart-section mt-150 mb-150">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 col-md-12">
					<div class="cart-table-wrap">
								<h2>Tus Elegidos</h2>
					

	<table class="cart-table">
  	<thead>
    <tr>
      <th class="product-remove">Eliminar Producto</th>
      <th class="product-image"></th>
      <th class="product-name"></th>
      <th class="product-price">Precio Individual</th>
      <th class="product-quantity">Cantidad</th>
      <th class="product-total">Total</th>
    </tr>
  </thead>

  <tbody>
    {% if carrito %}
      {% for item in carrito %}


        <tr>
          <td class="product-remove">
            <!-- botón quitar (opcional) -->
            <form method="post" action="{% url 'quitar_del_carrito' item.producto.id %}">
              {% csrf_token %}
              <input type="hidden" name="producto_id" value="{{ item.producto.id }}">
              <button type="submit" class="remove-btn">×</button>
            </form>
          </td>

          <td class="product-image">
            {% if item.producto.foto %}
              <img src="{{ item.producto.foto.url }}" alt="{{ item.producto.Titulo }}" style="max-width:80px;">
            {% else %}
              <img src="{% static 'img/default-product.png' %}" alt="sin imagen" style="max-width:80px;">
            {% endif %}
          </td>


          <td class="product-name">{{ item.producto.Titulo }}</td>
          <td class="product-price">${{ item.producto.Precio }}</td>


          <td class="product-quantity">
            <!-- actualizar cantidad -->
            <form method="post" action="{% url 'actualizar_cantidad' %}">
              {% csrf_token %}
              <input type="hidden" name="producto_id" value="{{ item.producto.id }}">
              <input type="number" name="cantidad" min="1" value="{{ item.cantidad }}" style="width:60px;">
              <button type="submit">Actualizar</button>
            </form>
          </td>

          <td class="product-total">${{ item.subtotal }}</td>
        </tr>
      {% endfor %}
    {% else %}
      <tr>
        <td colspan="6">Tu carrito está vacío</td>
      </tr>
    {% endif %}
  </tbody>
</table>
</div>
</div>
</div>
</div>
</div>

<!-- total -->
<!-- total -->
<div class="cart-summary">
  <p>Total: ${{ total }}</p>


<a href="{% url 'productos_presupuesto' %}" class="cart-buttons">
    			<i class="carrito"></i> Hacer Pedido
</a>
</div>


	

	
	<!-- jquery -->
	<script src="{% static 'js/jquery-1.11.3.min.js' %}"></script>
	<!-- bootstrap -->
	<script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
	<!-- count down -->
	<script src="{% static 'js/jquery.countdown.js' %}"></script>
	<!-- isotope -->
	<script src="{% static 'js/jquery.isotope-3.0.6.min.js' %}"></script>
	<!-- waypoints -->
	<script src="{% static 'js/waypoints.js' %}"></script>
	<!-- owl carousel -->
	<script src="{% static 'js/owl.carousel.min.js' %}"></script>
	<!-- magnific popup -->
	<script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
	<!-- mean menu -->
	<script src="{% static 'js/jquery.meanmenu.min.js' %}"></script>
	<!-- sticker js -->
	<script src="{% static 'js/sticker.js' %}"></script>
	<!-- main js -->
	<script src="{% static 'js/main.js' %}"></script>

</body>
</html>